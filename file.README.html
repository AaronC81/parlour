<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-Parlour">Parlour</h1>

<p><a href="https://travis-ci.org/AaronC81/parlour"><img src="https://travis-ci.org/AaronC81/parlour.svg?branch=master"></a> <img src="https://img.shields.io/gem/v/parlour.svg"></p>

<p>Parlour is a Ruby type information generator, merger and parser, supporting both <strong>Sorbet RBI files and Ruby 3/Steep RBS files</strong>. It consists of three key parts:</p>
<ul><li>
<p>The generator, which outputs beautifully formatted RBI/RBS files, created using an intuitive DSL.</p>
</li><li>
<p>The plugin/build system, which allows multiple Parlour plugins to generate RBIs for the same codebase. These are combined automatically as much as possible, but any other conflicts can be resolved manually through prompts.</p>
</li><li>
<p>The parser (currently RBI-only), which can read an RBI and convert it back into a tree of generator objects.</p>
</li></ul>

<h2 id="label-Why+should+I+use+this-3F">Why should I use this?</h2>
<ul><li>
<p>Parlour enables <strong>much easier creation of RBI/RBS generators</strong>, as formatting is all handled for you, and you don't need to write your own CLI.</p>
</li><li>
<p>You can <strong>use many plugins together seamlessly</strong>, running them all with a single command and consolidating all of their definitions into a single output file.</p>
</li><li>
<p>You can <strong>effortlessly build tools which need to access types within an RBI</strong>; no need to write your own parser!</p>
</li><li>
<p>You can <strong>generate RBI/RBS to ship with your gem</strong> for consuming projects to use (<a href="https://sorbet.org/docs/rbi#rbis-within-gems">see "RBIs within gems" in Sorbet's docs</a>).</p>
</li></ul>

<p>Please the wiki</strong><a href="https://github.com/AaronC81/parlour/wiki"></a> to get started!</p>

<h2 id="label-Feature+Support">Feature Support</h2>

<table role="table">
<thead>
<tr>
<th>Feature</th>
<th>RBI</th>
<th>RBS</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>GENERATION</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Classes</td>
<td>✅</td>
<td>⚠️ (missing ‘extension`)</td>
</tr>
<tr>
<td>Modules</td>
<td>✅</td>
<td>⚠️ (missing ‘extension`)</td>
</tr>
<tr>
<td>Interfaces</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Attributes</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Methods</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Overloaded methods</td>
<td>❌*</td>
<td>✅</td>
</tr>
<tr>
<td>Structs</td>
<td>✅</td>
<td>✅†</td>
</tr>
<tr>
<td>Enums</td>
<td>✅</td>
<td>✅†</td>
</tr>
<tr>
<td>Generation with plugins</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td><strong>MANIPULATION</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Parsing</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>Merging</td>
<td>✅</td>
<td>❌</td>
</tr>
</tbody>
</table>
<ul><li>
<p>✅ - Well supported</p>
</li><li>
<p>⚠️ - Some missing features</p>
</li><li>
<p>❌ - Not currently supported</p>
</li><li>
<p>* Only supported in stdlib types anyway</p>
</li><li>
<p>† Not natively supported; available as a one-way conversion from RBI</p>
</li></ul>

<h2 id="label-Creating+Type+Information">Creating Type Information</h2>

<p>Each file format has its own type information generator class, so there are two different generators you can use: <code>RbiGenerator</code> and <code>RbsGenerator</code>. Both generators are similar to use, however they provide different object types and parameters to match the functionality of their underlying type systems.</p>

<p>You can also convert your type information between formats; see <a href="#converting-between-formats">converting between formats</a>.</p>

<h3 id="label-Using+Just+the+Generator">Using Just the Generator</h3>

<p>Here’s a quick example of how you can generate some type information. Here we’ll generate an RBI using the <code>RbiGenerator</code> classes:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parlour</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_generator'>generator</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbiGenerator.html" title="Parlour::RbiGenerator (class)">RbiGenerator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbiGenerator.html#initialize-instance_method" title="Parlour::RbiGenerator#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_generator'>generator</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_create_module'>create_module</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
  <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_create_class'>create_class</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Foo</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_foo'>foo</span><span class='op'>|</span>
    <span class='id identifier rubyid_foo'>foo</span><span class='period'>.</span><span class='id identifier rubyid_create_method'>create_method</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>add_two_integers</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>parameters:</span> <span class='lbracket'>[</span>
      <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbiGenerator.html" title="Parlour::RbiGenerator (class)">RbiGenerator</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbiGenerator/Parameter.html" title="Parlour::RbiGenerator::Parameter (class)">Parameter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbiGenerator/Parameter.html#initialize-instance_method" title="Parlour::RbiGenerator::Parameter#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integer</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbiGenerator.html" title="Parlour::RbiGenerator (class)">RbiGenerator</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbiGenerator/Parameter.html" title="Parlour::RbiGenerator::Parameter (class)">Parameter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbiGenerator/Parameter.html#initialize-instance_method" title="Parlour::RbiGenerator::Parameter#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integer</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>return_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integer</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_create_class'>create_class</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>superclass:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Foo</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_generator'>generator</span><span class='period'>.</span><span class='id identifier rubyid_rbi'>rbi</span> <span class='comment'># =&gt; Our RBI as a string
</span></code></pre>

<p>This will generate the following RBI:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>A</span>
  <span class='kw'>class</span> <span class='const'>Foo</span>
    <span class='id identifier rubyid_sig'>sig</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_params'>params</span><span class='lparen'>(</span><span class='label'>a:</span> <span class='const'>Integer</span><span class='comma'>,</span> <span class='label'>b:</span> <span class='const'>Integer</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_returns'>returns</span><span class='lparen'>(</span><span class='const'>Integer</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>def</span> <span class='id identifier rubyid_add_two_integers'>add_two_integers</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>class</span> <span class='const'>Bar</span> <span class='op'>&lt;</span> <span class='const'>Foo</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>Using the RBS generator looks similar, but has an intermediary <code>MethodSignature</code> class to support RBS’ method overloading:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parlour</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_generator'>generator</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbsGenerator.html" title="Parlour::RbsGenerator (class)">RbsGenerator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbsGenerator.html#initialize-instance_method" title="Parlour::RbsGenerator#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_generator'>generator</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_create_module'>create_module</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
  <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_create_class'>create_class</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Foo</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_foo'>foo</span><span class='op'>|</span>
    <span class='id identifier rubyid_foo'>foo</span><span class='period'>.</span><span class='id identifier rubyid_create_method'>create_method</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>add_two_integers</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span>
      <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbsGenerator.html" title="Parlour::RbsGenerator (class)">RbsGenerator</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbsGenerator/MethodSignature.html" title="Parlour::RbsGenerator::MethodSignature (class)">MethodSignature</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbsGenerator/MethodSignature.html#initialize-instance_method" title="Parlour::RbsGenerator::MethodSignature#initialize (method)">new</a></span></span><span class='lparen'>(</span>
        <span class='lbracket'>[</span>
          <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbsGenerator.html" title="Parlour::RbsGenerator (class)">RbsGenerator</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbsGenerator/Parameter.html" title="Parlour::RbsGenerator::Parameter (class)">Parameter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbsGenerator/Parameter.html#initialize-instance_method" title="Parlour::RbsGenerator::Parameter#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integer</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
          <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbsGenerator.html" title="Parlour::RbsGenerator (class)">RbsGenerator</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbsGenerator/Parameter.html" title="Parlour::RbsGenerator::Parameter (class)">Parameter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbsGenerator/Parameter.html#initialize-instance_method" title="Parlour::RbsGenerator::Parameter#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integer</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integer</span><span class='tstring_end'>&#39;</span></span>
      <span class='rparen'>)</span>
    <span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_create_class'>create_class</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>superclass:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Foo</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_generator'>generator</span><span class='period'>.</span><span class='id identifier rubyid_rbs'>rbs</span> <span class='comment'># =&gt; Our RBS as a string
</span></code></pre>

<p>This generates an equivalent RBS file:</p>

<pre class="code ruby"><code class="ruby">module A
  class Foo
    def add_two_integers: (Integer a, Integer b) -&gt; Integer
  end

  class Bar &lt; Foo
  end
end
</code></pre>

<h3 id="label-Writing+a+Plugin">Writing a Plugin</h3>

<p>Plugins are better than using the generator alone, as your plugin can be combined with others to produce larger files without conflicts.</p>

<p>We could write the above example as an RBI plugin like this:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parlour</span><span class='tstring_end'>&#39;</span></span>

<span class='kw'>class</span> <span class='const'>MyPlugin</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/Plugin.html" title="Parlour::Plugin (class)">Plugin</a></span></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='id identifier rubyid_root'>root</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_create_module'>create_module</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
      <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_create_class'>create_class</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Foo</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_foo'>foo</span><span class='op'>|</span>
        <span class='id identifier rubyid_foo'>foo</span><span class='period'>.</span><span class='id identifier rubyid_create_method'>create_method</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>add_two_integers</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>parameters:</span> <span class='lbracket'>[</span>
          <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbiGenerator.html" title="Parlour::RbiGenerator (class)">RbiGenerator</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbiGenerator/Parameter.html" title="Parlour::RbiGenerator::Parameter (class)">Parameter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbiGenerator/Parameter.html#initialize-instance_method" title="Parlour::RbiGenerator::Parameter#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>a</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integer</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
          <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbiGenerator.html" title="Parlour::RbiGenerator (class)">RbiGenerator</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbiGenerator/Parameter.html" title="Parlour::RbiGenerator::Parameter (class)">Parameter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbiGenerator/Parameter.html#initialize-instance_method" title="Parlour::RbiGenerator::Parameter#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>b</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integer</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>return_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integer</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_create_class'>create_class</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Bar</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>superclass:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Foo</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>(Obviously, your plugin will probably examine a codebase somehow, to be more useful!)</p>

<p>You can then run several plugins, combining their output and saving it into one RBI file, using the command-line tool. The command line tool is configurated using a <code>.parlour</code> YAML file. For example, if that code was in a file called <code>plugin.rb</code>, then using this <code>.parlour</code> file and then running <code>parlour</code> would save the RBI into <code>output.rbi</code>:</p>

<pre class="code ruby"><code class="ruby">output_file:
  rbi: output.rbi

relative_requires:
  - plugin.rb
  - app/models/*.rb

plugins:
  MyPlugin: {}
</code></pre>

<p>The <code>{}</code> indicates that this plugin needs no extra configuration. If it did need configuration, this could be specified like so:</p>

<pre class="code ruby"><code class="ruby">plugins:
  MyPlugin:
    foo: something
    bar: something else
</code></pre>

<p>You can also use plugins from gems. If that plugin was published as a gem called <code>parlour-gem</code>:</p>

<pre class="code ruby"><code class="ruby">output_file:
  rbi: output.rbi

requires:
  - parlour-gem

plugins:
  MyPlugin: {}
</code></pre>

<p>The real power of this is the ability to use many plugins at once:</p>

<pre class="code ruby"><code class="ruby">output_file:
  rbi: output.rbi

requires:
  - gem1
  - gem2
  - gem3

plugins:
  Gem1::Plugin: {}
  Gem2::Plugin: {}
  Gem3::Plugin: {}
</code></pre>

<p>Currently, only plugins which generate RBI files are supported. However, you can use <a href="#converting-between-formats">Parlour’s type conversion</a> to convert the RBI types into RBS types:</p>

<pre class="code ruby"><code class="ruby">output_file:
  rbi: output.rbi
  rbs: output.rbs
</code></pre>

<h2 id="label-Using+Types">Using Types</h2>

<p>The most important part of your type information is the types themselves, which you’ll be specifying for method parameters, method returns, and attributes. These include simple types like <code>String</code>, up to more complex types like “an array of elements which are one of <code>Integer</code>, <code>String</code>, or nil”.</p>

<p>There are two ways to represent these types in Parlour:</p>
<ol><li>
<p>As <strong>generalized types</strong>; that is, instances of classes in the <code>Parlour::Types</code> namespace. This is the <strong>recommended way</strong>, as it is format-agnostic and can be compiled to RBI or RBS. For more information about these types and how to use them, see <a href="https://github.com/AaronC81/parlour/wiki/The-Types-namespace">this wiki page</a>.</p>
</li><li>
<p>As <strong>strings of code</strong> written in the format that your type system expects. The given strings are directly inserted into the final type file. These types are <strong>not portable across formats</strong>, and as such are <strong>not recommended and may be phased out</strong> in the future.</p>
</li></ol>

<p>Currently most type values within Parlour are typed as <code>Types::TypeLike</code>, which accepts a <code>String</code> or a <code>Types::Type</code> subclass.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_include'>include</span> <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span>

<span class='comment'># Two ways to express an attribute called &#39;example&#39;, which is:
</span><span class='comment'>#   an array of nilable strings or integers
</span>
<span class='comment'># 1. With generalised types - type is agnostic to the underlying type system
</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_create_attr_accessor'>create_attr_accessor</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type:</span>
  <span class='const'>Types</span><span class='op'>::</span><span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='const'>Types</span><span class='op'>::</span><span class='const'>Nilable</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
      <span class='const'>Types</span><span class='op'>::</span><span class='const'>Union</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>String</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integer</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='rparen'>)</span>
  <span class='rparen'>)</span>
<span class='rparen'>)</span>

<span class='comment'># 2. With string types - format depends on type system
</span><span class='comment'>#    If using RBI...
</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_create_attr_accessor'>create_attr_accessor</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type:</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>T::Array[T.nilable(T.any(String, Integer))]</span><span class='tstring_end'>&#39;</span></span>
<span class='rparen'>)</span>
<span class='comment'>#    If using RBS...
</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_create_attr_accessor'>create_attr_accessor</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type:</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Array[?(String | Integer)]</span><span class='tstring_end'>&#39;</span></span>
<span class='rparen'>)</span>
</code></pre>

<h3 id="label-Generalizing+String+Types">Generalizing String Types</h3>

<p>If you have loaded an RBI project or created a structure of nodes on an <code>RbiGenerator</code>, you can use <code>#generalize_from_rbi!</code> on your root namespace to attempt to permanently convert the RBI string types into generalized types:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Build up an RBI tree with string types
</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_create_attr_accessor'>create_attr_accessor</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>example</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type:</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>T::Array[T.nilable(T.any(String, Integer))]</span><span class='tstring_end'>&#39;</span></span>
<span class='rparen'>)</span>

<span class='comment'># Generalize it
</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_generalize_from_rbi!'>generalize_from_rbi!</span>

<span class='comment'># Take a look at our generalized type!
</span><span class='id identifier rubyid_pp'>pp</span> <span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span>
<span class='comment'># =&gt; #&lt;Parlour::Types::Array:0x0000557cdcebfdf8
</span><span class='comment'>#     @element=
</span><span class='comment'>#      #&lt;Parlour::Types::Nilable:0x0000557cdcef8c70
</span><span class='comment'>#       @type=
</span><span class='comment'>#        #&lt;Parlour::Types::Union:0x0000557cdcea0a70
</span><span class='comment'>#         @types=
</span><span class='comment'>#          [#&lt;Parlour::Types::Raw:0x0000557cdcea1920 @str=&quot;String&quot;&gt;,
</span><span class='comment'>#           #&lt;Parlour::Types::Raw:0x0000557cdcea0ae8 @str=&quot;Integer&quot;&gt;]&gt;&gt;&gt;
</span></code></pre>

<h2 id="label-Parsing+RBIs">Parsing RBIs</h2>

<p>You can either parse individual RBI files, or point Parlour to the root of a project and it will locate, parse and merge all RBI files.</p>

<p>Note that Parlour isn’t limited to just RBIs; it can parse inline <code>sigs</code> out of your Ruby source too!</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parlour</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># Return the object tree of a particular file
</span><span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/TypeLoader.html" title="Parlour::TypeLoader (module)">TypeLoader</a></span></span><span class='period'>.</span><span class='id identifier rubyid_load_file'><span class='object_link'><a href="Parlour/TypeLoader.html#load_file-class_method" title="Parlour::TypeLoader.load_file (method)">load_file</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path/to/your/file.rbis</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='comment'># Return the object tree for an entire Sorbet project - slow but thorough!
</span><span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/TypeLoader.html" title="Parlour::TypeLoader (module)">TypeLoader</a></span></span><span class='period'>.</span><span class='id identifier rubyid_load_project'><span class='object_link'><a href="Parlour/TypeLoader.html#load_project-class_method" title="Parlour::TypeLoader.load_project (method)">load_project</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>root/of/the/project</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<p>The structure of the returned object trees is identical to those you would create when generating an RBI, built of instances of <code>RbiObject</code> subclasses.</p>

<h2 id="label-Generating+RBI+for+a+Gem">Generating RBI for a Gem</h2>

<p>Include <code>parlour</code> as a development_dependency in your <code>.gemspec</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_add_development_dependency'>add_development_dependency</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>parlour</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Run Parlour from the command line:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_parlour'>parlour</span>
</code></pre>

<p>Parlour is configured to use sane defaults assuming a standard gem structure to generate an RBI that Sorbet will automatically find when your gem is included as a dependency. If you require more advanced configuration you can add a <code>.parlour</code> YAML file in the root of your project (see this project’s <code>.parlour</code> file as an example).</p>

<p>To disable the parsing step entire and just run plugins you can set <code>parser: false</code> in your <code>.parlour</code> file.</p>

<h2 id="label-Converting+Between+Formats">Converting Between Formats</h2>

<p><em>For more information, see the page[https://github.com/AaronC81/parlour/wiki/Converting-between-RBI-and-RBS].</em></p>

<p>Currently, only RBI to RBS conversion is supported, and if you’ve used string types (or are using a freshly-loaded project) you <strong>must them[#generalizing-string-types] first</strong>.</p>

<p>Then, all you need to do is create an <code>RbsGenerator</code> (which the converter will add your converted types to) and a <code>Conversion::RbiToRbs</code> instance (which performs the conversion). Then you can convert each object at your <code>RbiGenerator</code>‘s root namespace:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_rbi_gen'>rbi_gen</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbiGenerator.html" title="Parlour::RbiGenerator (class)">RbiGenerator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbiGenerator.html#initialize-instance_method" title="Parlour::RbiGenerator#initialize (method)">new</a></span></span>
<span class='comment'># Then, after populating the RbiGenerator with types...
</span>
<span class='comment'># Create an RbsGenerator and a converter
</span><span class='id identifier rubyid_rbs_gen'>rbs_gen</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/RbsGenerator.html" title="Parlour::RbsGenerator (class)">RbsGenerator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/RbsGenerator.html#initialize-instance_method" title="Parlour::RbsGenerator#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_converter'>converter</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Parlour.html" title="Parlour (module)">Parlour</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/Conversion.html" title="Parlour::Conversion (module)">Conversion</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Parlour/Conversion/RbiToRbs.html" title="Parlour::Conversion::RbiToRbs (class)">RbiToRbs</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Parlour/Conversion/RbiToRbs.html#initialize-instance_method" title="Parlour::Conversion::RbiToRbs#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_rbs_gen'>rbs_gen</span><span class='rparen'>)</span>

<span class='comment'># Convert each item at the root of the RbiGenerator and it to the root of the RbsGenerator
</span><span class='id identifier rubyid_converter'>converter</span><span class='period'>.</span><span class='id identifier rubyid_convert_all'>convert_all</span><span class='lparen'>(</span><span class='id identifier rubyid_rbi_gen'>rbi_gen</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='comma'>,</span> <span class='id identifier rubyid_rbs_gen'>rbs_gen</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='rparen'>)</span>
</code></pre>

<h2 id="label-Parlour+Plugins">Parlour Plugins</h2>

<p><em>Have you written an awesome Parlour plugin? Please submit a PR to add it to this list!</em></p>
<ul><li>
<p><a href="https://github.com/AaronC81/sord">Sord</a> - Generate RBIs from YARD documentation</p>
</li><li>
<p><a href="https://github.com/AaronC81/parlour-datamapper">parlour-datamapper</a> - Simple plugin for generating DataMapper model types</p>
</li><li>
<p><a href="https://github.com/chanzuckerberg/sorbet-rails">sorbet-rails</a> - Generate RBIs for Rails models, routes, mailers, etc.</p>
</li></ul>

<h2 id="label-Contributing">Contributing</h2>

<p>Bug reports and pull requests are welcome on GitHub at <a href="https://github.com/AaronC81/parlour">github.com/AaronC81/parlour</a>. This project is intended to be a safe, welcoming space for collaboration, and contributors are expected to adhere to the <a href="http://contributor-covenant.org">Contributor Covenant</a> code of conduct.</p>

<p>After making changes, you may wish to regenerate the RBI definitions in the <code>sorbet</code> folder by running these <code>srb rbi</code> commands:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_srb'>srb</span> <span class='id identifier rubyid_rbi'>rbi</span> <span class='id identifier rubyid_gems'>gems</span>
<span class='id identifier rubyid_srb'>srb</span> <span class='id identifier rubyid_rbi'>rbi</span> <span class='id identifier rubyid_sorbet'>sorbet</span><span class='op'>-</span><span class='id identifier rubyid_typed'>typed</span>
</code></pre>

<p>You should also regenerate the parlour.rbi file by running <code>bundle exec parlour</code>. Don’t edit this file manually, as your changes will be overwritten!</p>

<h2 id="label-License">License</h2>

<p>The gem is available as open source under the terms of the <a href="https://opensource.org/licenses/MIT">MIT License</a>.</p>

<h2 id="label-Code+of+Conduct">Code of Conduct</h2>

<p>Everyone interacting in the Parlour project’s codebases, issue trackers, chat rooms and mailing lists is expected to follow the <a href="https://github.com/AaronC81/parlour/blob/master/CODE_OF_CONDUCT.md">code of conduct</a>.</p>
</div></div>

      <div id="footer">
  Generated on Thu Apr 17 18:25:59 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.3).
</div>

    </div>
  </body>
</html>